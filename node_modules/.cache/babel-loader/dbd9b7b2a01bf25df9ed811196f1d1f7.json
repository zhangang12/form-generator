{"remainingRequest":"C:\\Users\\湛港\\Desktop\\form-generator\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\湛港\\Desktop\\form-generator\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!C:\\Users\\湛港\\Desktop\\form-generator\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\湛港\\Desktop\\form-generator\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\湛港\\Desktop\\form-generator\\src\\component\\jsonDrawer\\index.vue?vue&type=template&id=6028c5a7&scoped=true","dependencies":[{"path":"C:\\Users\\湛港\\Desktop\\form-generator\\src\\component\\jsonDrawer\\index.vue","mtime":1692714556029},{"path":"C:\\Users\\湛港\\Desktop\\form-generator\\babel.config.js","mtime":1692714559294},{"path":"C:\\Users\\湛港\\Desktop\\form-generator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1692715147026},{"path":"C:\\Users\\湛港\\Desktop\\form-generator\\node_modules\\babel-loader\\lib\\index.js","mtime":1692715146967},{"path":"C:\\Users\\湛港\\Desktop\\form-generator\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1692715135851},{"path":"C:\\Users\\湛港\\Desktop\\form-generator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1692715147026},{"path":"C:\\Users\\湛港\\Desktop\\form-generator\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1692715135847}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgdG9EaXNwbGF5U3RyaW5nIGFzIF90b0Rpc3BsYXlTdHJpbmcsIGNyZWF0ZVRleHRWTm9kZSBhcyBfY3JlYXRlVGV4dFZOb2RlLCB3aXRoQ3R4IGFzIF93aXRoQ3R4LCBGcmFnbWVudCBhcyBfRnJhZ21lbnQsIG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVFbGVtZW50QmxvY2sgYXMgX2NyZWF0ZUVsZW1lbnRCbG9jaywgcHVzaFNjb3BlSWQgYXMgX3B1c2hTY29wZUlkLCBwb3BTY29wZUlkIGFzIF9wb3BTY29wZUlkIH0gZnJvbSAidnVlIjsKY29uc3QgX3dpdGhTY29wZUlkID0gbiA9PiAoX3B1c2hTY29wZUlkKCJkYXRhLXYtNjAyOGM1YTciKSwgbiA9IG4oKSwgX3BvcFNjb3BlSWQoKSwgbik7CmNvbnN0IF9ob2lzdGVkXzEgPSAvKiNfX1BVUkVfXyovX3dpdGhTY29wZUlkKCgpID0+IC8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCB7CiAgaWQ6ICJlZGl0b3JKc29uIiwKICBjbGFzczogImpzb24tZWRpdG9yIgp9LCBudWxsLCAtMSAvKiBIT0lTVEVEICovKSk7CmNvbnN0IF9ob2lzdGVkXzIgPSB7CiAgc3R5bGU6IHsKICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLAogICAgYm90dG9tOiAwLAogICAgd2lkdGg6ICcxMDAlJywKICAgIGJvcmRlclRvcDogJzFweCBzb2xpZCAjZThlOGU4JywKICAgIHBhZGRpbmc6ICc1cHggMTBweCcsCiAgICB0ZXh0QWxpZ246ICdyaWdodCcsCiAgICBsZWZ0OiAwLAogICAgYmFja2dyb3VuZDogJyNmZmYnLAogICAgYm9yZGVyUmFkaXVzOiAnMCAwIDRweCA0cHgnCiAgfQp9OwpleHBvcnQgZnVuY3Rpb24gcmVuZGVyKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIGNvbnN0IF9jb21wb25lbnRfSWNvbiA9IF9yZXNvbHZlQ29tcG9uZW50KCJJY29uIik7CiAgY29uc3QgX2NvbXBvbmVudF9hX2J1dHRvbiA9IF9yZXNvbHZlQ29tcG9uZW50KCJhLWJ1dHRvbiIpOwogIGNvbnN0IF9jb21wb25lbnRfYV9zcGluID0gX3Jlc29sdmVDb21wb25lbnQoImEtc3BpbiIpOwogIGNvbnN0IF9jb21wb25lbnRfYV9kcmF3ZXIgPSBfcmVzb2x2ZUNvbXBvbmVudCgiYS1kcmF3ZXIiKTsKICBjb25zdCBfY29tcG9uZW50X2V4cG9ydF9tb2RhbCA9IF9yZXNvbHZlQ29tcG9uZW50KCJleHBvcnQtbW9kYWwiKTsKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKF9GcmFnbWVudCwgbnVsbCwgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2FfZHJhd2VyLCB7CiAgICB2aXNpYmxlOiBfY3R4Lmpzb25EcmF3ZXJWaXNpYmxlLAogICAgd2lkdGg6ICI0NSUiLAogICAgImJvZHktc3R5bGUiOiB7CiAgICAgIHBhZGRpbmc6ICcwcHgnCiAgICB9LAogICAgY2xvc2FibGU6IGZhbHNlCiAgfSwgewogICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2Ffc3BpbiwgewogICAgICB0aXA6ICJMb2FkaW5nLi4uIiwKICAgICAgc3Bpbm5pbmc6IF9jdHgubG9hZGluZwogICAgfSwgewogICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2hvaXN0ZWRfMSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMiwgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2FfYnV0dG9uLCB7CiAgICAgICAgdHlwZTogImRhc2hlZCIsCiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICJtYXJnaW5SaWdodCI6ICI4cHgiCiAgICAgICAgfSwKICAgICAgICBvbkNsaWNrOiAkc2V0dXAucmVmcmVzaAogICAgICB9LCB7CiAgICAgICAgaWNvbjogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X0ljb24sIHsKICAgICAgICAgIG5hbWU6ICJyZWxvYWQiCiAgICAgICAgfSldKSwKICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVRleHRWTm9kZSgiICIgKyBfdG9EaXNwbGF5U3RyaW5nKF9jdHguJHQoJ2Jhc2UucmVmcmVzaCcpKSwgMSAvKiBURVhUICovKV0pLAoKICAgICAgICBfOiAxIC8qIFNUQUJMRSAqLwogICAgICB9LCA4IC8qIFBST1BTICovLCBbIm9uQ2xpY2siXSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2FfYnV0dG9uLCB7CiAgICAgICAgdHlwZTogInByaW1hcnkiLAogICAgICAgIGNsYXNzOiAiY29weS1qc29uLWJ0biIsCiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICJtYXJnaW5SaWdodCI6ICI4cHgiCiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAgaWNvbjogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X0ljb24sIHsKICAgICAgICAgIG5hbWU6ICJjb3B5IgogICAgICAgIH0pXSksCiAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVUZXh0Vk5vZGUoIiAiICsgX3RvRGlzcGxheVN0cmluZyhfY3R4LiR0KCdiYXNlLmNvcHkuanNvbi5jb2RlJykpLCAxIC8qIFRFWFQgKi8pXSksCgogICAgICAgIF86IDEgLyogU1RBQkxFICovCiAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9hX2J1dHRvbiwgewogICAgICAgIHR5cGU6ICJwcmltYXJ5IiwKICAgICAgICBzdHlsZTogewogICAgICAgICAgIm1hcmdpblJpZ2h0IjogIjhweCIKICAgICAgICB9LAogICAgICAgIG9uQ2xpY2s6ICRzZXR1cC5vcGVuRXhwb3J0TW9kYWwKICAgICAgfSwgewogICAgICAgIGljb246IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9JY29uLCB7CiAgICAgICAgICBuYW1lOiAiY2xvdWQtZG93bmxvYWQiCiAgICAgICAgfSldKSwKICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVRleHRWTm9kZSgiICIgKyBfdG9EaXNwbGF5U3RyaW5nKF9jdHguJHQoJ2Jhc2UuZXhwb3J0Lmpzb24uZmlsZScpKSwgMSAvKiBURVhUICovKV0pLAoKICAgICAgICBfOiAxIC8qIFNUQUJMRSAqLwogICAgICB9LCA4IC8qIFBST1BTICovLCBbIm9uQ2xpY2siXSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2FfYnV0dG9uLCB7CiAgICAgICAgb25DbGljazogJHNldHVwLm9uQ2xvc2UKICAgICAgfSwgewogICAgICAgIGljb246IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9JY29uLCB7CiAgICAgICAgICBuYW1lOiAiY2xvc2UiCiAgICAgICAgfSldKSwKICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVRleHRWTm9kZSgiICIgKyBfdG9EaXNwbGF5U3RyaW5nKF9jdHguJHQoJ2Jhc2UuY2xvc2UnKSksIDEgLyogVEVYVCAqLyldKSwKCiAgICAgICAgXzogMSAvKiBTVEFCTEUgKi8KICAgICAgfSwgOCAvKiBQUk9QUyAqLywgWyJvbkNsaWNrIl0pXSldKSwKICAgICAgXzogMSAvKiBTVEFCTEUgKi8KICAgIH0sIDggLyogUFJPUFMgKi8sIFsic3Bpbm5pbmciXSldKSwKICAgIF86IDEgLyogU1RBQkxFICovCiAgfSwgOCAvKiBQUk9QUyAqLywgWyJ2aXNpYmxlIl0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9leHBvcnRfbW9kYWwsIHsKICAgIHJlZjogImV4cG9ydE1vZGFsIiwKICAgIG9uQ29uZmlybTogJHNldHVwLmV4cG9ydE1vZGFsQ29uZm9ybQogIH0sIG51bGwsIDggLyogUFJPUFMgKi8sIFsib25Db25maXJtIl0pXSwgNjQgLyogU1RBQkxFX0ZSQUdNRU5UICovKTsKfQ=="},{"version":3,"names":["_createElementVNode","id","class","style","_createVNode","_component_a_drawer","visible","_ctx","jsonDrawerVisible","width","padding","closable","_component_a_spin","tip","spinning","loading","_hoisted_1","_hoisted_2","_component_a_button","type","onClick","$setup","refresh","icon","_withCtx","_component_Icon","name","_toDisplayString","$t","openExportModal","onClose","_component_export_modal","ref","onConfirm","exportModalConform"],"sources":["C:\\Users\\湛港\\Desktop\\form-generator\\src\\component\\jsonDrawer\\index.vue"],"sourcesContent":["<template>\n    <a-drawer\n        :visible=\"jsonDrawerVisible\"\n        width=\"45%\"\n        :body-style=\"{ padding: '0px' }\"\n        :closable=\"false\"\n    >\n        <a-spin tip=\"Loading...\" :spinning=\"loading\">\n            <div id=\"editorJson\" class=\"json-editor\"></div>\n            <div\n            :style=\"{\n                position: 'absolute',\n                bottom: 0,\n                width: '100%',\n                borderTop: '1px solid #e8e8e8',\n                padding: '5px 10px',\n                textAlign: 'right',\n                left: 0,\n                background: '#fff',\n                borderRadius: '0 0 4px 4px',\n            }\"\n            >\n                <a-button type=\"dashed\" style=\"marginRight: 8px\" @click=\"refresh\">\n                    <template #icon>\n                        <Icon name=\"reload\" />\n                    </template>\n                    {{ $t('base.refresh') }}\n                </a-button>\n                <a-button type=\"primary\" class=\"copy-json-btn\" style=\"marginRight: 8px\">\n                    <template #icon>\n                        <Icon name=\"copy\" />\n                    </template>\n                    {{ $t('base.copy.json.code') }}\n                </a-button>\n                <a-button\n                    type=\"primary\"\n                    style=\"marginRight: 8px\"\n                    @click=\"openExportModal\"\n                >\n                    <template #icon>\n                        <Icon name=\"cloud-download\" />\n                    </template>\n                    {{ $t('base.export.json.file') }}\n                </a-button>\n                <a-button @click=\"onClose\">\n                    <template #icon>\n                        <Icon name=\"close\" />\n                    </template>\n                    {{ $t('base.close') }}\n                </a-button>\n            </div>\n        </a-spin>\n    </a-drawer>\n    <export-modal ref=\"exportModal\" @confirm=\"exportModalConform\" />\n</template>\n<script>\nimport { reactive, toRefs, onMounted, nextTick, getCurrentInstance } from 'vue'\nimport ClipboardJS from 'clipboard'\nimport { saveAs } from 'file-saver'\nimport exportModal from './exportModal'\nexport default {\n    emits: ['updateConf'],\n    components: {\n        exportModal\n    },\n    setup(props, ctx){\n        let editor\n        const { proxy } = getCurrentInstance()\n        const data = reactive({\n            jsonDrawerVisible: false,\n            loading: true\n        })\n\n        onMounted(() => {\n            const clipboard = new ClipboardJS('.copy-json-btn', {\n                text: trigger => {\n                    let editor = getEditor()\n                    proxy.$notification.success({\n                        message: proxy.$t('base.successfully'),\n                        description: proxy.$t('base.code.copy.successfully')\n                    })\n                    return editor.getValue()\n                }\n            })\n            clipboard.on('error', e => {\n                proxy.$message.error(proxy.$t('base.code.copy.failed'))\n            })\n        })\n\n        const getEditor = () => {\n            if(editor){\n                return editor\n            }\n            editor = window.monaco.editor.create(\n                document.getElementById('editorJson'),{\n                    theme: 'vs-dark',\n                    language: 'json',\n                    automaticLayout: true\n                }\n            )\n            return editor\n        }\n\n        const setEditorValue = (codeStr) => {\n            let btfCode = beautifier.js(codeStr)\n            let editor = getEditor()\n            editor.setValue(btfCode)\n        }\n\n        const onClose = () => {\n            data.jsonDrawerVisible = false\n        }\n\n        const open = (config, fromRule) => {\n            data.jsonDrawerVisible = true\n            nextTick(() => {\n                setEditorValue(JSON.stringify({fields:config, ...fromRule}))\n                data.loading = false\n            })\n        }\n\n        const refresh = () => {\n            let editor = getEditor()\n            let { fields, ...other } = JSON.parse(editor.getValue())\n            ctx.emit('updateConf', { fields, formRule: other })\n        }\n\n        const openExportModal = () => {\n            proxy.$refs.exportModal.onOpen()\n        }\n\n        const exportJsonFile = (fileName) => {\n            if (!fileName) fileName = `${+new Date()}.json`\n            const codeStr = getEditor().getValue()\n            const blob = new Blob([codeStr], { type: 'text/plain;charset=utf-8' })\n            saveAs(blob, fileName)\n        }\n\n        const exportModalConform = (fileName) => {\n            exportJsonFile(fileName)\n        }\n\n        return {\n            open,\n            refresh,\n            onClose,\n            exportModalConform,\n            openExportModal,\n            ...toRefs(data)\n        }\n    }\n}\n</script>\n<style lang=\"scss\" scoped>\n@import '@/styles/mixin.scss';\n\n@include action-bar;\n\n.json-editor{\n  height: 100vh;\n}\n</style>"],"mappings":";;gEAQYA,mBAAA,CAA+C;EAA1CC,EAAE,EAAC,YAAY;EAACC,KAAK,EAAC;;;EAE1BC,KAAK,EAAE;;;;;;;;;;;AAUP;;;;;;;6DAnBTC,YAAA,CAmDWC,mBAAA;IAlDNC,OAAO,EAAEC,IAAA,CAAAC,iBAAiB;IAC3BC,KAAK,EAAC,KAAK;IACV,YAAU,EAAE;MAAAC,OAAA;IAAA,CAAkB;IAC9BC,QAAQ,EAAE;;sBAEX,MA4CS,CA5CTP,YAAA,CA4CSQ,iBAAA;MA5CDC,GAAG,EAAC,YAAY;MAAEC,QAAQ,EAAEP,IAAA,CAAAQ;;wBAChC,MAA+C,CAA/CC,UAA+C,EAC/ChB,mBAAA,CAyCM,OAzCNiB,UAyCM,GA5BFb,YAAA,CAKWc,mBAAA;QALDC,IAAI,EAAC,QAAQ;QAAChB,KAAwB,EAAxB;UAAA;QAAA,CAAwB;QAAEiB,OAAK,EAAEC,MAAA,CAAAC;;QAC1CC,IAAI,EAAAC,QAAA,CACX,MAAsB,CAAtBpB,YAAA,CAAsBqB,eAAA;UAAhBC,IAAI,EAAC;QAAQ,G;0BACZ,MACX,C,iBADW,GACX,GAAAC,gBAAA,CAAGpB,IAAA,CAAAqB,EAAE,iC;;;sCAETxB,YAAA,CAKWc,mBAAA;QALDC,IAAI,EAAC,SAAS;QAACjB,KAAK,EAAC,eAAe;QAACC,KAAwB,EAAxB;UAAA;QAAA;;QAChCoB,IAAI,EAAAC,QAAA,CACX,MAAoB,CAApBpB,YAAA,CAAoBqB,eAAA;UAAdC,IAAI,EAAC;QAAM,G;0BACV,MACX,C,iBADW,GACX,GAAAC,gBAAA,CAAGpB,IAAA,CAAAqB,EAAE,wC;;;UAETxB,YAAA,CASWc,mBAAA;QARPC,IAAI,EAAC,SAAS;QACdhB,KAAwB,EAAxB;UAAA;QAAA,CAAwB;QACvBiB,OAAK,EAAEC,MAAA,CAAAQ;;QAEGN,IAAI,EAAAC,QAAA,CACX,MAA8B,CAA9BpB,YAAA,CAA8BqB,eAAA;UAAxBC,IAAI,EAAC;QAAgB,G;0BACpB,MACX,C,iBADW,GACX,GAAAC,gBAAA,CAAGpB,IAAA,CAAAqB,EAAE,0C;;;sCAETxB,YAAA,CAKWc,mBAAA;QALAE,OAAK,EAAEC,MAAA,CAAAS;MAAO;QACVP,IAAI,EAAAC,QAAA,CACX,MAAqB,CAArBpB,YAAA,CAAqBqB,eAAA;UAAfC,IAAI,EAAC;QAAO,G;0BACX,MACX,C,iBADW,GACX,GAAAC,gBAAA,CAAGpB,IAAA,CAAAqB,EAAE,+B;;;;;;;kCAKrBxB,YAAA,CAAgE2B,uBAAA;IAAlDC,GAAG,EAAC,aAAa;IAAEC,SAAO,EAAEZ,MAAA,CAAAa"}]}