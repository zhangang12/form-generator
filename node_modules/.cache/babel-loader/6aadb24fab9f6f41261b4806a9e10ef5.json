{"remainingRequest":"C:\\Users\\湛港\\Desktop\\form-generator\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\湛港\\Desktop\\form-generator\\src\\views\\preview\\format.js","dependencies":[{"path":"C:\\Users\\湛港\\Desktop\\form-generator\\src\\views\\preview\\format.js","mtime":1692714558708},{"path":"C:\\Users\\湛港\\Desktop\\form-generator\\babel.config.js","mtime":1692714559294},{"path":"C:\\Users\\湛港\\Desktop\\form-generator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1692715147026},{"path":"C:\\Users\\湛港\\Desktop\\form-generator\\node_modules\\babel-loader\\lib\\index.js","mtime":1692715146967}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBnZW5lcmF0ZSBmcm9tICJAYmFiZWwvZ2VuZXJhdG9yIjsKaW1wb3J0ICogYXMgcGFyc2VyIGZyb20gIkBiYWJlbC9wYXJzZXIiOwppbXBvcnQgdHJhdmVyc2UgZnJvbSAiQGJhYmVsL3RyYXZlcnNlIjsKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGNvZGVTdHIpIHsKICBsZXQgdmFyS2V5ID0gW107CiAgbGV0IGFzdCA9IHBhcnNlci5wYXJzZShjb2RlU3RyLCB7CiAgICBzb3VyY2VUeXBlOiAnbW9kdWxlJwogIH0pOwogIHRyYXZlcnNlKGFzdCwgewogICAgSW1wb3J0RGVjbGFyYXRpb246IHBhdGggPT4gewogICAgICBwYXRoLnJlbW92ZSgpOwogICAgfSwKICAgIFZhcmlhYmxlRGVjbGFyYXRpb246IHBhdGggPT4gewogICAgICBsZXQgX2lkcyA9IHBhdGguZ2V0QmluZGluZ0lkZW50aWZpZXJzKCk7CiAgICAgIHZhcktleS5wdXNoKF9pZHMpOwogICAgICBwYXRoLnNraXAoKTsKICAgIH0sCiAgICBGdW5jdGlvbkRlY2xhcmF0aW9uOiBwYXRoID0+IHsKICAgICAgbGV0IHsKICAgICAgICBub2RlCiAgICAgIH0gPSBwYXRqOwogICAgICBsZXQgewogICAgICAgIG5hbWUKICAgICAgfSA9IG5vZGUuaWQ7CiAgICAgIHZhcktleS5wdXNoKHsKICAgICAgICBbbmFtZV06IG5vZGUKICAgICAgfSk7CiAgICAgIHBhdGguc2tpcCgpOwogICAgfQogIH0pOwogIGxldCBmb3JtYXRWYXJLZXkgPSAoKSA9PiB7CiAgICBsZXQga2V5cyA9IFtdOwogICAgbGV0IGtleXNTdHIgPSBgO3JldHVybiB7fWA7CiAgICBpZiAodmFyS2V5Lmxlbmd0aCkgewogICAgICB2YXJLZXkuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICBrZXlzLnB1c2goLi4uT2JqZWN0LmtleXMoaXRlbSkpOwogICAgICB9KTsKICAgICAga2V5c1N0ciA9IGA7cmV0dXJuIHske2tleXMuam9pbignLCcpfX1gOwogICAgfQogICAgcmV0dXJuIGtleXNTdHI7CiAgfTsKICBsZXQgewogICAgY29kZQogIH0gPSBnZW5lcmF0ZShhc3QpOwogIHJldHVybiBgewogICAgICAgIHNldHVwKHByb3BzLCBjdHgpewogICAgICAgICAgICAke2NvZGV9CiAgICAgICAgICAgICR7Zm9ybWF0VmFyS2V5KCl9CiAgICAgICAgfQogICAgfWA7Cn0="},{"version":3,"names":["generate","parser","traverse","codeStr","varKey","ast","parse","sourceType","ImportDeclaration","path","remove","VariableDeclaration","_ids","getBindingIdentifiers","push","skip","FunctionDeclaration","node","patj","name","id","formatVarKey","keys","keysStr","length","forEach","item","Object","join","code"],"sources":["C:/Users/湛港/Desktop/form-generator/src/views/preview/format.js"],"sourcesContent":["\nimport generate from \"@babel/generator\"\nimport * as parser from \"@babel/parser\"\nimport traverse from \"@babel/traverse\"\n\nexport default function(codeStr){\n    let varKey = []\n    let ast = parser.parse(codeStr, {sourceType:'module'})\n    traverse(ast, {\n        ImportDeclaration: path => {\n            path.remove()\n        },\n        VariableDeclaration: path => {\n            let _ids = path.getBindingIdentifiers()\n            varKey.push(_ids)\n            path.skip()\n        },\n        FunctionDeclaration: path => {\n            let { node } = patj\n            let { name } = node.id\n            varKey.push({ [name]: node })\n            path.skip()\n        }\n    })\n\n    let formatVarKey = () => {\n        let keys = []\n        let keysStr = `;return {}`\n        if(varKey.length){\n            varKey.forEach(item => {\n                keys.push(...Object.keys(item))\n            })\n            keysStr = `;return {${keys.join(',')}}`\n        }\n        return keysStr\n    }\n    let { code } = generate(ast)\n\n    return `{\n        setup(props, ctx){\n            ${code}\n            ${formatVarKey()}\n        }\n    }`\n}"],"mappings":";AACA,OAAOA,QAAQ,MAAM,kBAAkB;AACvC,OAAO,KAAKC,MAAM,MAAM,eAAe;AACvC,OAAOC,QAAQ,MAAM,iBAAiB;AAEtC,eAAe,UAASC,OAAO,EAAC;EAC5B,IAAIC,MAAM,GAAG,EAAE;EACf,IAAIC,GAAG,GAAGJ,MAAM,CAACK,KAAK,CAACH,OAAO,EAAE;IAACI,UAAU,EAAC;EAAQ,CAAC,CAAC;EACtDL,QAAQ,CAACG,GAAG,EAAE;IACVG,iBAAiB,EAAEC,IAAI,IAAI;MACvBA,IAAI,CAACC,MAAM,CAAC,CAAC;IACjB,CAAC;IACDC,mBAAmB,EAAEF,IAAI,IAAI;MACzB,IAAIG,IAAI,GAAGH,IAAI,CAACI,qBAAqB,CAAC,CAAC;MACvCT,MAAM,CAACU,IAAI,CAACF,IAAI,CAAC;MACjBH,IAAI,CAACM,IAAI,CAAC,CAAC;IACf,CAAC;IACDC,mBAAmB,EAAEP,IAAI,IAAI;MACzB,IAAI;QAAEQ;MAAK,CAAC,GAAGC,IAAI;MACnB,IAAI;QAAEC;MAAK,CAAC,GAAGF,IAAI,CAACG,EAAE;MACtBhB,MAAM,CAACU,IAAI,CAAC;QAAE,CAACK,IAAI,GAAGF;MAAK,CAAC,CAAC;MAC7BR,IAAI,CAACM,IAAI,CAAC,CAAC;IACf;EACJ,CAAC,CAAC;EAEF,IAAIM,YAAY,GAAGA,CAAA,KAAM;IACrB,IAAIC,IAAI,GAAG,EAAE;IACb,IAAIC,OAAO,GAAI,YAAW;IAC1B,IAAGnB,MAAM,CAACoB,MAAM,EAAC;MACbpB,MAAM,CAACqB,OAAO,CAACC,IAAI,IAAI;QACnBJ,IAAI,CAACR,IAAI,CAAC,GAAGa,MAAM,CAACL,IAAI,CAACI,IAAI,CAAC,CAAC;MACnC,CAAC,CAAC;MACFH,OAAO,GAAI,YAAWD,IAAI,CAACM,IAAI,CAAC,GAAG,CAAE,GAAE;IAC3C;IACA,OAAOL,OAAO;EAClB,CAAC;EACD,IAAI;IAAEM;EAAK,CAAC,GAAG7B,QAAQ,CAACK,GAAG,CAAC;EAE5B,OAAQ;AACZ;AACA,cAAcwB,IAAK;AACnB,cAAcR,YAAY,CAAC,CAAE;AAC7B;AACA,MAAM;AACN"}]}