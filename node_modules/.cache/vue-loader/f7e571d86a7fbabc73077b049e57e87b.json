{"remainingRequest":"C:\\Users\\湛港\\Desktop\\form-generator\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\湛港\\Desktop\\form-generator\\src\\component\\jsonDrawer\\index.vue?vue&type=template&id=6028c5a7&scoped=true","dependencies":[{"path":"C:\\Users\\湛港\\Desktop\\form-generator\\src\\component\\jsonDrawer\\index.vue","mtime":1692714556029},{"path":"C:\\Users\\湛港\\Desktop\\form-generator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1692715147026},{"path":"C:\\Users\\湛港\\Desktop\\form-generator\\node_modules\\babel-loader\\lib\\index.js","mtime":1692715146967},{"path":"C:\\Users\\湛港\\Desktop\\form-generator\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1692715135851},{"path":"C:\\Users\\湛港\\Desktop\\form-generator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1692715147026},{"path":"C:\\Users\\湛港\\Desktop\\form-generator\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1692715135847}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgICA8YS1kcmF3ZXIKICAgICAgICA6dmlzaWJsZT0ianNvbkRyYXdlclZpc2libGUiCiAgICAgICAgd2lkdGg9IjQ1JSIKICAgICAgICA6Ym9keS1zdHlsZT0ieyBwYWRkaW5nOiAnMHB4JyB9IgogICAgICAgIDpjbG9zYWJsZT0iZmFsc2UiCiAgICA+CiAgICAgICAgPGEtc3BpbiB0aXA9IkxvYWRpbmcuLi4iIDpzcGlubmluZz0ibG9hZGluZyI+CiAgICAgICAgICAgIDxkaXYgaWQ9ImVkaXRvckpzb24iIGNsYXNzPSJqc29uLWVkaXRvciI+PC9kaXY+CiAgICAgICAgICAgIDxkaXYKICAgICAgICAgICAgOnN0eWxlPSJ7CiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJywKICAgICAgICAgICAgICAgIGJvdHRvbTogMCwKICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsCiAgICAgICAgICAgICAgICBib3JkZXJUb3A6ICcxcHggc29saWQgI2U4ZThlOCcsCiAgICAgICAgICAgICAgICBwYWRkaW5nOiAnNXB4IDEwcHgnLAogICAgICAgICAgICAgICAgdGV4dEFsaWduOiAncmlnaHQnLAogICAgICAgICAgICAgICAgbGVmdDogMCwKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICcjZmZmJywKICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogJzAgMCA0cHggNHB4JywKICAgICAgICAgICAgfSIKICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgPGEtYnV0dG9uIHR5cGU9ImRhc2hlZCIgc3R5bGU9Im1hcmdpblJpZ2h0OiA4cHgiIEBjbGljaz0icmVmcmVzaCI+CiAgICAgICAgICAgICAgICAgICAgPHRlbXBsYXRlICNpY29uPgogICAgICAgICAgICAgICAgICAgICAgICA8SWNvbiBuYW1lPSJyZWxvYWQiIC8+CiAgICAgICAgICAgICAgICAgICAgPC90ZW1wbGF0ZT4KICAgICAgICAgICAgICAgICAgICB7eyAkdCgnYmFzZS5yZWZyZXNoJykgfX0KICAgICAgICAgICAgICAgIDwvYS1idXR0b24+CiAgICAgICAgICAgICAgICA8YS1idXR0b24gdHlwZT0icHJpbWFyeSIgY2xhc3M9ImNvcHktanNvbi1idG4iIHN0eWxlPSJtYXJnaW5SaWdodDogOHB4Ij4KICAgICAgICAgICAgICAgICAgICA8dGVtcGxhdGUgI2ljb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIG5hbWU9ImNvcHkiIC8+CiAgICAgICAgICAgICAgICAgICAgPC90ZW1wbGF0ZT4KICAgICAgICAgICAgICAgICAgICB7eyAkdCgnYmFzZS5jb3B5Lmpzb24uY29kZScpIH19CiAgICAgICAgICAgICAgICA8L2EtYnV0dG9uPgogICAgICAgICAgICAgICAgPGEtYnV0dG9uCiAgICAgICAgICAgICAgICAgICAgdHlwZT0icHJpbWFyeSIKICAgICAgICAgICAgICAgICAgICBzdHlsZT0ibWFyZ2luUmlnaHQ6IDhweCIKICAgICAgICAgICAgICAgICAgICBAY2xpY2s9Im9wZW5FeHBvcnRNb2RhbCIKICAgICAgICAgICAgICAgID4KICAgICAgICAgICAgICAgICAgICA8dGVtcGxhdGUgI2ljb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIG5hbWU9ImNsb3VkLWRvd25sb2FkIiAvPgogICAgICAgICAgICAgICAgICAgIDwvdGVtcGxhdGU+CiAgICAgICAgICAgICAgICAgICAge3sgJHQoJ2Jhc2UuZXhwb3J0Lmpzb24uZmlsZScpIH19CiAgICAgICAgICAgICAgICA8L2EtYnV0dG9uPgogICAgICAgICAgICAgICAgPGEtYnV0dG9uIEBjbGljaz0ib25DbG9zZSI+CiAgICAgICAgICAgICAgICAgICAgPHRlbXBsYXRlICNpY29uPgogICAgICAgICAgICAgICAgICAgICAgICA8SWNvbiBuYW1lPSJjbG9zZSIgLz4KICAgICAgICAgICAgICAgICAgICA8L3RlbXBsYXRlPgogICAgICAgICAgICAgICAgICAgIHt7ICR0KCdiYXNlLmNsb3NlJykgfX0KICAgICAgICAgICAgICAgIDwvYS1idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvYS1zcGluPgogICAgPC9hLWRyYXdlcj4KICAgIDxleHBvcnQtbW9kYWwgcmVmPSJleHBvcnRNb2RhbCIgQGNvbmZpcm09ImV4cG9ydE1vZGFsQ29uZm9ybSIgLz4K"},{"version":3,"sources":["C:\\Users\\湛港\\Desktop\\form-generator\\src\\component\\jsonDrawer\\index.vue"],"names":[],"mappings":"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","file":"C:/Users/湛港/Desktop/form-generator/src/component/jsonDrawer/index.vue","sourceRoot":"","sourcesContent":["<template>\n    <a-drawer\n        :visible=\"jsonDrawerVisible\"\n        width=\"45%\"\n        :body-style=\"{ padding: '0px' }\"\n        :closable=\"false\"\n    >\n        <a-spin tip=\"Loading...\" :spinning=\"loading\">\n            <div id=\"editorJson\" class=\"json-editor\"></div>\n            <div\n            :style=\"{\n                position: 'absolute',\n                bottom: 0,\n                width: '100%',\n                borderTop: '1px solid #e8e8e8',\n                padding: '5px 10px',\n                textAlign: 'right',\n                left: 0,\n                background: '#fff',\n                borderRadius: '0 0 4px 4px',\n            }\"\n            >\n                <a-button type=\"dashed\" style=\"marginRight: 8px\" @click=\"refresh\">\n                    <template #icon>\n                        <Icon name=\"reload\" />\n                    </template>\n                    {{ $t('base.refresh') }}\n                </a-button>\n                <a-button type=\"primary\" class=\"copy-json-btn\" style=\"marginRight: 8px\">\n                    <template #icon>\n                        <Icon name=\"copy\" />\n                    </template>\n                    {{ $t('base.copy.json.code') }}\n                </a-button>\n                <a-button\n                    type=\"primary\"\n                    style=\"marginRight: 8px\"\n                    @click=\"openExportModal\"\n                >\n                    <template #icon>\n                        <Icon name=\"cloud-download\" />\n                    </template>\n                    {{ $t('base.export.json.file') }}\n                </a-button>\n                <a-button @click=\"onClose\">\n                    <template #icon>\n                        <Icon name=\"close\" />\n                    </template>\n                    {{ $t('base.close') }}\n                </a-button>\n            </div>\n        </a-spin>\n    </a-drawer>\n    <export-modal ref=\"exportModal\" @confirm=\"exportModalConform\" />\n</template>\n<script>\nimport { reactive, toRefs, onMounted, nextTick, getCurrentInstance } from 'vue'\nimport ClipboardJS from 'clipboard'\nimport { saveAs } from 'file-saver'\nimport exportModal from './exportModal'\nexport default {\n    emits: ['updateConf'],\n    components: {\n        exportModal\n    },\n    setup(props, ctx){\n        let editor\n        const { proxy } = getCurrentInstance()\n        const data = reactive({\n            jsonDrawerVisible: false,\n            loading: true\n        })\n\n        onMounted(() => {\n            const clipboard = new ClipboardJS('.copy-json-btn', {\n                text: trigger => {\n                    let editor = getEditor()\n                    proxy.$notification.success({\n                        message: proxy.$t('base.successfully'),\n                        description: proxy.$t('base.code.copy.successfully')\n                    })\n                    return editor.getValue()\n                }\n            })\n            clipboard.on('error', e => {\n                proxy.$message.error(proxy.$t('base.code.copy.failed'))\n            })\n        })\n\n        const getEditor = () => {\n            if(editor){\n                return editor\n            }\n            editor = window.monaco.editor.create(\n                document.getElementById('editorJson'),{\n                    theme: 'vs-dark',\n                    language: 'json',\n                    automaticLayout: true\n                }\n            )\n            return editor\n        }\n\n        const setEditorValue = (codeStr) => {\n            let btfCode = beautifier.js(codeStr)\n            let editor = getEditor()\n            editor.setValue(btfCode)\n        }\n\n        const onClose = () => {\n            data.jsonDrawerVisible = false\n        }\n\n        const open = (config, fromRule) => {\n            data.jsonDrawerVisible = true\n            nextTick(() => {\n                setEditorValue(JSON.stringify({fields:config, ...fromRule}))\n                data.loading = false\n            })\n        }\n\n        const refresh = () => {\n            let editor = getEditor()\n            let { fields, ...other } = JSON.parse(editor.getValue())\n            ctx.emit('updateConf', { fields, formRule: other })\n        }\n\n        const openExportModal = () => {\n            proxy.$refs.exportModal.onOpen()\n        }\n\n        const exportJsonFile = (fileName) => {\n            if (!fileName) fileName = `${+new Date()}.json`\n            const codeStr = getEditor().getValue()\n            const blob = new Blob([codeStr], { type: 'text/plain;charset=utf-8' })\n            saveAs(blob, fileName)\n        }\n\n        const exportModalConform = (fileName) => {\n            exportJsonFile(fileName)\n        }\n\n        return {\n            open,\n            refresh,\n            onClose,\n            exportModalConform,\n            openExportModal,\n            ...toRefs(data)\n        }\n    }\n}\n</script>\n<style lang=\"scss\" scoped>\n@import '@/styles/mixin.scss';\n\n@include action-bar;\n\n.json-editor{\n  height: 100vh;\n}\n</style>"]}]}